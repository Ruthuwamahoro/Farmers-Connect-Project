<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Farmers Connect</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="main_banner">
      <h2>Farmers Connect</h2>
    </div>
    <div class="main-container">
      <div class="container">
        <div>
          <h1>Order List</h1>
        </div>
        <div class="container-input">
          <input type="text" placeholder="search Order" />
          <input type="date" value="select date" />
          <input type="text" placeholder="Sort By" />
        </div>
      </div>
      <div class="status">
        <h3>Status</h3>
        <span
          style="
            width: 30px;
            text-align: center;
            color: light rgb(156, 152, 152);
            height: 20px;
            align-self: center;
            position: relative;
            left: 10px;
          "
          >All</span
        >

        <span>Pending Payment</span>
        <span>On Going</span>
        <span>Completed</span>
        <span>Failed</span>
      </div>
    </div>

    <div class="great-container">
      <div class="product-container">
        <div class="product-container1">
          <div>
            <p style="opacity: 0.5" class="date">12 Apr 2023</p>
            <img
              src="images/tomato1.jpg"
              style="height: 100px; width: 133.3px"
              alt="tomato image"/>
          </div>
          <div class="product-details">
            <span
              style="
                width: 70px;
                text-align: center;
                color: blue;
                border: 2px solid blue;
                border-radius: 8px;
                padding: 4px;
              ">
              On Going
              </span>
            <span style="font-size: 15px; margin-left: 15px; opacity: 0.5" class="inv_no"
              >INV/Number/XXXX/ABCDEFG</span>
            <h4 class="store">Store Name</h4>
            <h4 class="product_name"> Product Name</h4>
            <p style="opacity: 0.5">4 items * $300.00</p>
            <p style="opacity: 0.5">+ 3 other items</p>
          </div>
          <div class="total-price">
            <h3>Total Price</h3>
            <p class="price">XXXXX.X</p>
            <small>View Order details</small>
            <button class="track_order">Track Order</button>
          </div>
        </div>
      </div>
    </div>

    <div class="great-container container2">
      <div class="product-container">
        <div class="product-container1">
          <div>
            <p style="opacity: 0.5" class="date">22 Apr 2023</p>
            <img
              src="images/patatoes.jpg"
              style="height: 100px; width: 133.3px"
              alt="tomato image"
            />
          </div>
          <div class="product-details">
            <span
              style="
                width: 70px;
                text-align: center;
                color: blue;
                border: 2px solid blue;
                border-radius: 8px;
                padding: 4px;">
              On Going
            </span>
            <span style="font-size: 15px; margin-left: 15px; opacity: 0.5" class="inv_no">
              INV/Number/XXXX/ABCDEFG
            </span>
            <h4 class="store">Store Name</h4>
            <h4 class="product_name">Product Name</h4>
            <p style="opacity: 0.5">2 items * $190.00</p>
            <p style="opacity: 0.5">+ 3 other items</p>
          </div>
          <div class="total-price">
            <h3>Total Price</h3>
            <p class="price">XXXXX.X</p>
            <small>View Order details</small>
            <button class="order">Repeat Order</button>
          </div>
        </div>
      </div>
    </div>

    <div class="great-container container2">
      <div class="product-container">
        <div class="product-container1">
          <div>
            <p style="opacity: 0.5" class="date">22 Apr 2023</p>
            <img
              src="images/patatoes.jpg"
              style="height: 100px; width: 133.3px"
              alt="tomato image"
            />
          </div>
          <div class="product-details">
            <span
              style="
                width: 70px;
                text-align: center;
                color: blue;
                border: 2px solid blue;
                border-radius: 8px;
                padding: 4px;">
              On Going
            </span>
            <span style="font-size: 15px; margin-left: 15px; opacity: 0.5" class="inv_no">
              INV/Number/XXXX/ABCDEFG
            </span>
            <h4 class="store">Store Name</h4>
            <h4 class="product_name">Product Name</h4>
            <p style="opacity: 0.5">2 items * $190.00</p>
            <p style="opacity: 0.5">+ 3 other items</p>
          </div>
          <div class="total-price">
            <h3>Total Price</h3>
            <p class="price">XXXXX.X</p>
            <small>View Order details</small>
            <button class="order">Repeat Order</button>
          </div>
        </div>
      </div>
    </div>

    <div class="great-container container2">
      <div class="product-container">
        <div class="product-container1">
          <div>
            <p style="opacity: 0.5" class="date">22 Apr 2023</p>
            <img
              src="images/patatoes.jpg"
              style="height: 100px; width: 133.3px"
              alt="tomato image"
            />
          </div>
          <div class="product-details">
            <span
              style="
                width: 70px;
                text-align: center;
                color: blue;
                border: 2px solid blue;
                border-radius: 8px;
                padding: 4px;">
              On Going
            </span>
            <span style="font-size: 15px; margin-left: 15px; opacity: 0.5" class="inv_no">
              INV/Number/XXXX/ABCDEFG
            </span>
            <h4 class="store">Store Name</h4>
            <h4 class="product_name">Product Name</h4>
            <p style="opacity: 0.5">2 items * $190.00</p>
            <p style="opacity: 0.5">+ 3 other items</p>
          </div>
          <div class="total-price">
            <h3>Total Price</h3>
            <p class="price">XXXXX.X</p>
            <small>View Order details</small>
            <button class="order">Repeat Order</button>
          </div>
        </div>
      </div>
    </div>

    <div class="great-container container2">
      <div class="product-container">
        <div class="product-container1">
          <div>
            <p style="opacity: 0.5" class="date">22 Apr 2023</p>
            <img
              src="images/patatoes.jpg"
              style="height: 100px; width: 133.3px"
              alt="tomato image"
            />
          </div>
          <div class="product-details">
            <span
              style="
                width: 70px;
                text-align: center;
                color: blue;
                border: 2px solid blue;
                border-radius: 8px;
                padding: 4px;">
              On Going
            </span>
            <span style="font-size: 15px; margin-left: 15px; opacity: 0.5" class="inv_no">
              INV/Number/XXXX/ABCDEFG
            </span>
            <h4 class="store">Store Name</h4>
            <h4 class="product_name">Product Name</h4>
            <p style="opacity: 0.5">2 items * $190.00</p>
            <p style="opacity: 0.5">+ 3 other items</p>
          </div>
          <div class="total-price">
            <h3>Total Price</h3>
            <p class="price">XXXXX.X</p>
            <small>View Order details</small>
            <button class="order">Repeat Order</button>
          </div>
        </div>
      </div>
    </div>

    <div class="great-container container2">
      <div class="product-container">
        <div class="product-container1">
          <div>
            <p style="opacity: 0.5" class="date">22 Apr 2023</p>
            <img
              src="images/patatoes.jpg"
              style="height: 100px; width: 133.3px"
              alt="tomato image"
            />
          </div>
          <div class="product-details">
            <span
              style="
                width: 70px;
                text-align: center;
                color: blue;
                border: 2px solid blue;
                border-radius: 8px;
                padding: 4px;">
              On Going
            </span>
            <span style="font-size: 15px; margin-left: 15px; opacity: 0.5" class="inv_no">
              INV/Number/XXXX/ABCDEFG
            </span>
            <h4 class="store">Store Name</h4>
            <h4 class="product_name">Product Name</h4>
            <p style="opacity: 0.5">2 items * $190.00</p>
            <p style="opacity: 0.5">+ 3 other items</p>
          </div>
          <div class="total-price">
            <h3>Total Price</h3>
            <p class="price">XXXXX.X</p>
            <small>View Order details</small>
            <button class="order">Repeat Order</button>
          </div>
        </div>
      </div>
    </div>
    
    <script>
      // Function to fetch and display order data
      async function fetchAndDisplayOrders() {
        try {
          const response = await fetch('http://127.0.0.1:5000/api/products');
          const orders = await response.json();
    
          // Call a function to display the orders on the webpage
          displayOrders(orders);
        } catch (error) {
          console.error('Error fetching orders:', error);
        }
      }
    
      // Function to display orders on the webpage
      function displayOrders(orders) {
        const ordersContainer = document.querySelector('.great-container');
    
        // Clear existing content
        ordersContainer.innerHTML = '';
    
        // Loop through each order and create HTML elements
        orders.forEach(order => {
          const orderElement = document.createElement('div');
          orderElement.classList.add('great-container');
    
          orderElement.innerHTML = `
            <div class="product-container1">
              <div>
                <p style="opacity: 0.5" class="date">${order.date}</p>
                <img src="${order.image}" style="height: 100px; width: 133.3px" alt="${order.product_name} image"/>
              </div>
              <div class="product-details">
                <span style="width: 70px; text-align: center; color: ${order.statusColor}; border: 2px solid ${order.statusColor}; border-radius: 8px; padding: 4px;">
                  ${order.status}
                </span>
                <span style="font-size: 15px; margin-left: 15px; opacity: 0.5" class="inv_no">${order.invoice_number}</span>
                <h4 class="store">${order.store_name}</h4>
                <h4 class="product_name">${order.product_name}</h4>
                <p style="opacity: 0.5">${order.item_count} items * $${order.item_price}</p>
                <p style="opacity: 0.5">+ ${order.other_items} other items</p>
              </div>
              <div class="total-price">
                <h3>Total Price</h3>
                <p class="price">${order.total_price}</p>
                <small>View Order details</small>
                <button class="${order.buttonClass}">${order.buttonText}</button>
              </div>
            </div>
          `;
    
          // Append the order element to the container
          ordersContainer.appendChild(orderElement);
        });
      }
    
      // Call the function to fetch and display orders when the page loads
      document.addEventListener('DOMContentLoaded', fetchAndDisplayOrders);
    </script>
  </body>
</html>
